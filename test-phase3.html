<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬ä¸‰é˜¶æ®µæµ‹è¯• - åŒºå—è”åŠ¨ç³»ç»Ÿ - å°ç™½å­¦</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/learning.css">
    <style>
        .test-container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 20px;
        }
        .test-section {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }
        .test-section h3 {
            color: var(--primary-color);
            margin-bottom: var(--spacing-md);
        }
        .test-button {
            margin-right: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }
        .test-demo-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }
        .demo-panel {
            background: var(--bg-secondary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            min-height: 300px;
        }
        .demo-panel h4 {
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
        }
        .test-block {
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .test-block:hover {
            border-color: var(--primary-color);
        }
        .info-panel {
            background: var(--bg-secondary);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-md);
            font-family: 'Consolas', monospace;
            font-size: var(--font-sm);
            max-height: 200px;
            overflow-y: auto;
        }
        .control-group {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin-bottom: var(--spacing-md);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>å°ç™½å­¦ - ç¬¬ä¸‰é˜¶æ®µæµ‹è¯•ï¼ˆåŒºå—è”åŠ¨ç³»ç»Ÿï¼‰</h1>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link">è¿”å›é¦–é¡µ</a>
                <a href="learning.html?exampleId=ex_html_basic_001" class="nav-link">å­¦ä¹ é¡µé¢</a>
            </nav>
        </div>
    </header>

    <main class="test-container">
        <!-- åŸºç¡€è”åŠ¨æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ”— 1. åŸºç¡€è”åŠ¨æµ‹è¯•</h3>
            <p>é¼ æ ‡æ‚¬åœå’Œç‚¹å‡»åŒºå—ï¼Œè§‚å¯Ÿè”åŠ¨æ•ˆæœ</p>
            
            <div class="test-demo-area">
                <div class="demo-panel">
                    <h4>å·¦ä¾§åŒºå—</h4>
                    <div class="test-block block" 
                         data-block-id="test_left_1" 
                         data-block-type="demo"
                         data-associations="test_right_1,test_right_2">
                        åŒºå— L1ï¼ˆå…³è” R1, R2ï¼‰
                    </div>
                    <div class="test-block block" 
                         data-block-id="test_left_2" 
                         data-block-type="demo"
                         data-associations="test_right_2">
                        åŒºå— L2ï¼ˆå…³è” R2ï¼‰
                    </div>
                    <div class="test-block block" 
                         data-block-id="test_left_3" 
                         data-block-type="demo"
                         data-associations="test_right_1,test_right_3">
                        åŒºå— L3ï¼ˆå…³è” R1, R3ï¼‰
                    </div>
                </div>
                
                <div class="demo-panel">
                    <h4>å³ä¾§åŒºå—</h4>
                    <div class="test-block block" 
                         data-block-id="test_right_1" 
                         data-block-type="demo"
                         data-associations="test_left_1,test_left_3">
                        åŒºå— R1ï¼ˆå…³è” L1, L3ï¼‰
                    </div>
                    <div class="test-block block" 
                         data-block-id="test_right_2" 
                         data-block-type="demo"
                         data-associations="test_left_1,test_left_2">
                        åŒºå— R2ï¼ˆå…³è” L1, L2ï¼‰
                    </div>
                    <div class="test-block block" 
                         data-block-id="test_right_3" 
                         data-block-type="demo"
                         data-associations="test_left_3">
                        åŒºå— R3ï¼ˆå…³è” L3ï¼‰
                    </div>
                </div>
            </div>
            
            <div class="control-group">
                <button class="btn-secondary test-button" onclick="clearHighlights()">æ¸…é™¤æ‰€æœ‰é«˜äº®</button>
                <button class="btn-secondary test-button" onclick="highlightBlock('test_left_1')">é«˜äº® L1</button>
                <button class="btn-secondary test-button" onclick="showBlockInfo('test_left_1')">æŸ¥çœ‹ L1 ä¿¡æ¯</button>
            </div>
            
            <div id="basicTestInfo" class="info-panel">
                æç¤ºï¼šæ‚¬åœåŒºå—æŸ¥çœ‹æ‚¬åœé«˜äº®ï¼Œç‚¹å‡»åŒºå—æŸ¥çœ‹å›ºå®šé«˜äº®
            </div>
        </div>

        <!-- æ˜¾ç¤º/éšè—æ§åˆ¶æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ‘ï¸ 2. æ˜¾ç¤º/éšè—æ§åˆ¶æµ‹è¯•</h3>
            
            <div class="test-demo-area">
                <div class="demo-panel">
                    <h4>æµ‹è¯•åŒºå—</h4>
                    <div class="test-block block" 
                         data-block-id="toggle_1" 
                         data-block-type="demo">
                        å¯åˆ‡æ¢åŒºå— 1
                    </div>
                    <div class="test-block block" 
                         data-block-id="toggle_2" 
                         data-block-type="demo">
                        å¯åˆ‡æ¢åŒºå— 2
                    </div>
                    <div class="test-block block" 
                         data-block-id="toggle_3" 
                         data-block-type="demo">
                        å¯åˆ‡æ¢åŒºå— 3
                    </div>
                </div>
                
                <div class="demo-panel">
                    <h4>æ§åˆ¶é¢æ¿</h4>
                    <div class="control-group">
                        <button class="btn-primary test-button" onclick="showBlock('toggle_1', 'fade')">æ·¡å…¥æ˜¾ç¤º 1</button>
                        <button class="btn-primary test-button" onclick="hideBlock('toggle_1', 'fade')">æ·¡å‡ºéšè— 1</button>
                    </div>
                    <div class="control-group">
                        <button class="btn-primary test-button" onclick="showBlock('toggle_2', 'slide')">æ»‘å…¥æ˜¾ç¤º 2</button>
                        <button class="btn-primary test-button" onclick="hideBlock('toggle_2', 'slide')">æ»‘å‡ºéšè— 2</button>
                    </div>
                    <div class="control-group">
                        <button class="btn-primary test-button" onclick="showBlock('toggle_3', 'scale')">ç¼©æ”¾æ˜¾ç¤º 3</button>
                        <button class="btn-primary test-button" onclick="hideBlock('toggle_3', 'scale')">ç¼©æ”¾éšè— 3</button>
                    </div>
                    <div class="control-group">
                        <button class="btn-success test-button" onclick="showAllToggleBlocks()">æ˜¾ç¤ºå…¨éƒ¨</button>
                        <button class="btn-danger test-button" onclick="hideAllToggleBlocks()">éšè—å…¨éƒ¨</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠ¨ç”»æ•ˆæœæµ‹è¯• -->
        <div class="test-section">
            <h3>âœ¨ 3. åŠ¨ç”»æ•ˆæœæµ‹è¯•</h3>
            
            <div class="test-demo-area">
                <div class="demo-panel">
                    <h4>åŠ¨ç”»åŒºå—</h4>
                    <div class="test-block block" 
                         data-block-id="anim_1" 
                         data-block-type="demo">
                        åŠ¨ç”»æµ‹è¯•åŒºå—
                    </div>
                </div>
                
                <div class="demo-panel">
                    <h4>åŠ¨ç”»æ§åˆ¶</h4>
                    <div class="control-group">
                        <button class="btn-primary test-button" onclick="animateShake()">æŠ–åŠ¨</button>
                        <button class="btn-primary test-button" onclick="animatePulse()">è„‰å†²</button>
                        <button class="btn-primary test-button" onclick="animateBlink()">é—ªçƒ</button>
                        <button class="btn-primary test-button" onclick="animateBounce()">å¼¹è·³</button>
                    </div>
                    <div class="control-group">
                        <button class="btn-success test-button" onclick="scrollToBlock()">æ»šåŠ¨åˆ°åŒºå—</button>
                        <button class="btn-success test-button" onclick="focusBlock()">èšç„¦åŒºå—</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‹–æ‹½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ–±ï¸ 4. æ‹–æ‹½åŠŸèƒ½æµ‹è¯•</h3>
            
            <div class="test-demo-area">
                <div class="demo-panel">
                    <h4>å¯æ‹–æ‹½åŒºå—</h4>
                    <div class="test-block block" 
                         data-block-id="drag_1" 
                         data-block-type="demo">
                        æ‹–æ‹½åŒºå— 1
                    </div>
                    <div class="test-block block" 
                         data-block-id="drag_2" 
                         data-block-type="demo">
                        æ‹–æ‹½åŒºå— 2
                    </div>
                </div>
                
                <div class="demo-panel">
                    <h4>æ‹–æ‹½æ§åˆ¶</h4>
                    <div class="control-group">
                        <button class="btn-primary test-button" onclick="enableDragBlocks()">å¯ç”¨æ‹–æ‹½</button>
                        <button class="btn-danger test-button" onclick="disableDragBlocks()">ç¦ç”¨æ‹–æ‹½</button>
                    </div>
                    <div id="dragInfo" class="info-panel">
                        æ‹–æ‹½çŠ¶æ€ï¼šæœªå¯ç”¨
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»¼åˆæµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ¯ 5. ç»¼åˆåŠŸèƒ½æµ‹è¯•</h3>
            <div class="control-group">
                <button class="btn-success test-button" onclick="runFullTest()">è¿è¡Œå®Œæ•´æµ‹è¯•</button>
                <button class="btn-secondary test-button" onclick="resetAll()">é‡ç½®æ‰€æœ‰</button>
            </div>
            <div id="fullTestResult" class="info-panel">
                ç­‰å¾…æµ‹è¯•...
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 å°ç™½å­¦ - äº’åŠ¨å¼ç¼–ç¨‹å­¦ä¹ å¹³å°</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/common.js"></script>
    <script src="js/block-interaction.js"></script>
    <script>
        // åˆå§‹åŒ–åŒºå—è”åŠ¨ç®¡ç†å™¨
        const manager = new BlockInteractionManager();
        
        // æ³¨å†Œæ‰€æœ‰æµ‹è¯•åŒºå—
        document.addEventListener('DOMContentLoaded', () => {
            const allBlocks = document.querySelectorAll('[data-block-id]');
            manager.registerBlocks(allBlocks);
            console.log('å·²æ³¨å†Œ', allBlocks.length, 'ä¸ªåŒºå—');
        });
        
        // åŸºç¡€è”åŠ¨æµ‹è¯•
        function clearHighlights() {
            manager.clearAllHighlights();
            updateInfo('basicTestInfo', 'âœ“ å·²æ¸…é™¤æ‰€æœ‰é«˜äº®');
        }
        
        function highlightBlock(blockId) {
            manager.togglePermanentHighlight(blockId);
            updateInfo('basicTestInfo', `âœ“ å·²åˆ‡æ¢åŒºå— ${blockId} çš„é«˜äº®çŠ¶æ€`);
        }
        
        function showBlockInfo(blockId) {
            const info = manager.getBlockInfo(blockId);
            if (info) {
                updateInfo('basicTestInfo', 
                    `åŒºå—ä¿¡æ¯:\n` +
                    `ID: ${info.id}\n` +
                    `ç±»å‹: ${info.type}\n` +
                    `å…³è”åŒºå—: ${info.associations.join(', ')}\n` +
                    `æ˜¯å¦é«˜äº®: ${info.isHighlighted}\n` +
                    `æ˜¯å¦å¯è§: ${info.isVisible}`
                );
            } else {
                updateInfo('basicTestInfo', 'âŒ åŒºå—ä¸å­˜åœ¨');
            }
        }
        
        // æ˜¾ç¤º/éšè—æµ‹è¯•
        function showBlock(blockId, animation) {
            manager.showBlocks(blockId, animation);
            CommonUtils.showMessage(`åŒºå— ${blockId} å·²æ˜¾ç¤ºï¼ˆ${animation}ï¼‰`, 'success');
        }
        
        function hideBlock(blockId, animation) {
            manager.hideBlocks(blockId, animation);
            CommonUtils.showMessage(`åŒºå— ${blockId} å·²éšè—ï¼ˆ${animation}ï¼‰`, 'info');
        }
        
        function showAllToggleBlocks() {
            manager.showBlocks(['toggle_1', 'toggle_2', 'toggle_3'], 'fade');
            CommonUtils.showMessage('æ‰€æœ‰åŒºå—å·²æ˜¾ç¤º', 'success');
        }
        
        function hideAllToggleBlocks() {
            manager.hideBlocks(['toggle_1', 'toggle_2', 'toggle_3'], 'fade');
            CommonUtils.showMessage('æ‰€æœ‰åŒºå—å·²éšè—', 'info');
        }
        
        // åŠ¨ç”»æ•ˆæœæµ‹è¯•
        function animateShake() {
            manager.shake('anim_1');
            CommonUtils.showMessage('æŠ–åŠ¨åŠ¨ç”»', 'info');
        }
        
        function animatePulse() {
            manager.pulse('anim_1');
            CommonUtils.showMessage('è„‰å†²åŠ¨ç”»', 'info');
        }
        
        function animateBlink() {
            manager.blink('anim_1', 3);
            CommonUtils.showMessage('é—ªçƒåŠ¨ç”»', 'info');
        }
        
        function animateBounce() {
            const block = document.querySelector('[data-block-id="anim_1"]');
            if (block) {
                block.style.animation = 'bounce 0.5s';
                setTimeout(() => block.style.animation = '', 500);
            }
            CommonUtils.showMessage('å¼¹è·³åŠ¨ç”»', 'info');
        }
        
        function scrollToBlock() {
            manager.scrollToBlock('anim_1');
            CommonUtils.showMessage('æ»šåŠ¨åˆ°åŒºå—', 'info');
        }
        
        function focusBlock() {
            manager.focusBlock('anim_1');
            CommonUtils.showMessage('èšç„¦åŒºå—', 'success');
        }
        
        // æ‹–æ‹½æµ‹è¯•
        function enableDragBlocks() {
            manager.enableDrag(['drag_1', 'drag_2']);
            updateInfo('dragInfo', 'æ‹–æ‹½çŠ¶æ€ï¼šå·²å¯ç”¨\næç¤ºï¼šç°åœ¨å¯ä»¥æ‹–åŠ¨åŒºå—äº†');
            CommonUtils.showMessage('æ‹–æ‹½å·²å¯ç”¨', 'success');
        }
        
        function disableDragBlocks() {
            manager.disableDrag(['drag_1', 'drag_2']);
            updateInfo('dragInfo', 'æ‹–æ‹½çŠ¶æ€ï¼šå·²ç¦ç”¨');
            CommonUtils.showMessage('æ‹–æ‹½å·²ç¦ç”¨', 'info');
        }
        
        // ç»¼åˆæµ‹è¯•
        async function runFullTest() {
            const results = [];
            updateInfo('fullTestResult', 'æ­£åœ¨è¿è¡Œæµ‹è¯•...\n');
            
            try {
                // æµ‹è¯•1ï¼šåŒºå—æ³¨å†Œ
                results.push('ğŸ“ æµ‹è¯•1: åŒºå—æ³¨å†Œ');
                const blocks = document.querySelectorAll('[data-block-id]');
                results.push(`âœ“ æ‰¾åˆ° ${blocks.length} ä¸ªåŒºå—\n`);
                
                // æµ‹è¯•2ï¼šé«˜äº®åŠŸèƒ½
                results.push('ğŸ“ æµ‹è¯•2: é«˜äº®åŠŸèƒ½');
                manager.togglePermanentHighlight('test_left_1');
                await sleep(500);
                const info = manager.getBlockInfo('test_left_1');
                results.push(`âœ“ é«˜äº®çŠ¶æ€: ${info.isHighlighted}\n`);
                manager.clearAllHighlights();
                
                // æµ‹è¯•3ï¼šæ˜¾ç¤º/éšè—
                results.push('ğŸ“ æµ‹è¯•3: æ˜¾ç¤º/éšè—');
                manager.hideBlocks('toggle_1', 'fade');
                await sleep(500);
                manager.showBlocks('toggle_1', 'fade');
                results.push('âœ“ æ˜¾ç¤º/éšè—åŠŸèƒ½æ­£å¸¸\n');
                
                // æµ‹è¯•4ï¼šåŠ¨ç”»æ•ˆæœ
                results.push('ğŸ“ æµ‹è¯•4: åŠ¨ç”»æ•ˆæœ');
                manager.pulse('anim_1');
                await sleep(1000);
                results.push('âœ“ åŠ¨ç”»æ•ˆæœæ­£å¸¸\n');
                
                // æµ‹è¯•5ï¼šæ‹–æ‹½åŠŸèƒ½
                results.push('ğŸ“ æµ‹è¯•5: æ‹–æ‹½åŠŸèƒ½');
                manager.enableDrag('drag_1');
                const dragBlock = document.querySelector('[data-block-id="drag_1"]');
                const isDraggable = dragBlock.getAttribute('draggable') === 'true';
                results.push(`âœ“ æ‹–æ‹½å¯ç”¨çŠ¶æ€: ${isDraggable}\n`);
                
                results.push('\nğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼');
                updateInfo('fullTestResult', results.join('\n'));
                CommonUtils.showMessage('æµ‹è¯•å®Œæˆï¼', 'success');
            } catch (error) {
                results.push(`\nâŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
                updateInfo('fullTestResult', results.join('\n'));
                CommonUtils.showMessage('æµ‹è¯•å¤±è´¥', 'error');
            }
        }
        
        function resetAll() {
            manager.reset();
            location.reload();
        }
        
        // å·¥å…·å‡½æ•°
        function updateInfo(elementId, text) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = text;
            }
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>
